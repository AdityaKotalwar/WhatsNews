<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<!-- <link rel="stylesheet" type="text/css" href="/css/signin.css"  > -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
	<div class="container-fluid bg">
		<div class="row">
			<div class="col-md-4 col-sm-4 col-xs-12"></div>
			<div class="col-md-4 col-sm-4 col-xs-12">
				<form class = "form-container" id="form1">
					<div class="signin-form">
						<label for="input1">Email</label>
						<input type="email" class= "form-control" id="inputEmail" placeholder="Enter email address" required>
					</div>
					<div class="signin-form">
						<label for="input2">Password</label>
						<input type="password" class= "form-control" id="inputPassword" placeholder="Enter password" required>
					</div>
					<div class="signin-form">
					    <input type ="button" class="btn btn-success btn-block" onclick="signin()" value="Submit" ></button>
					</div>
					<!-- <div class="signin-form">
					    <input type = "button" class="btn btn-success btn-block" id="signin_button"  >Submit</button>
                    </div> -->
					<div class="signin-form">
						<label for="signup redirect">Don't have an account? Go to <a id="gotosignup" onclick="gotosignup()">signup page</a></label>
					</div>
				</form>

			</div>
			<div class="col-md-4 col-sm-4 col-xs-12"></div>
        </div>
    </div>

	

</body>
</html>

<script>
	function gotosignup(){
		location.href = "/signup"
	}

	// $(document).ready(function(){
	// 	$('#signin_button').click(function(){
	// 		console.log("Signin");
	// 		$.ajax
    //         	url: '/signin'
    //         	type: 'POST'
    //         	data: JSON.stringify({
	// 				email : $('#inputEmail').val(),
	// 				password : $('#inputPassword').val()
	// 			})
    //         	dataType: 'json'
    //         	success: (data, textStatus, jqXHR, function(){
    //             	if (typeof data.redirect == 'string')
	// 					window.location = data.redirect
	// 			});
	// 	});
	// });

	// $(document).ready(function(){
	// 	var found = 0;
	// 	$('#signin_button').click(function(){
	// 		console.log($('#inputEmail').val())
	// 		$.post("/signin",{data : $("inputEmail").val()},
	// 		function(data, status){
	// 			console.log("Received");
	// 			window.location.replace("/main");
	// 			//found = 1;
	// 			//alert("Data: " + data.redirect + "\nStatus: " + status);
	// 		})
	// 		// if(found ==1){
	// 		// 	console.log("yayayayayyayya")
	// 		// 	location.href = "/main"
	// 		// }data : $(form1).serialize()
	// 	});
	// });



	function signin(){
		var form = document.getElementById("form1");
		var email = document.getElementById("inputEmail");
		var password = document.getElementById("inputPassword");
		fetch('/signin',{
			method : 'POST',
			body : JSON.stringify({email : email.value, password : password.value}),
			headers : {
				"Content-Type" : "application/json; charset=utf-8"
			}
		}).then(function(response){
			console.log("REsponse is " + response)
			if(response){
				location.href = "/main";
				localStorage.setItem("emailId", email.value);
              
			}
		});
		
	}
		
		
</script>

<style>
.bg{background-color: #004E64; width: 100%; height: 100vh;}
.form-container{ padding:10%; margin-top: 20vh; margin-bottom: 20vh;
    background-color: #ffffff;
    -webkit-box-shadow: 0px 0px 24px 1px rgb(137, 221, 241);
	-moz-box-shadow: 0px 0px 24px 1px rgb(137, 221, 241);
	box-shadow: 0px 0px 24px 1px rgb(137, 221, 241);
	border-radius: 20px;
}
.signin-form{padding: 10px 10px; }
.signup-form{padding: 10px 10px;}

</style>